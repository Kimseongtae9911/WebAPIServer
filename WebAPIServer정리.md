# C#
    - 마이크로소프트에서 개발한 .Net Framewor 기반 범용 목적의 다중 패러다임 프로그래밍 언어

## C# 기본 문법
### 컨테이너(컬렉션)
- C++과 다르게 선언과 함께 메모리가 할당되지 않는다
    - EX) int[] arr = new int[5];
- C#에서는 컨테이너에 데이터를 저장할 때 Object형식의 개체로 저장하기 때문에 다양한 타입의 데이터를 넣을 수 있다
- ArrayList(List), HashTable(Dictionary), Queue, Stack 등의 컬렉션 존재

### Async, Await
- 비동기 프로그래밍을 위한 키워드(async, await)
- 수행 시간이 긴 작업을 블로킹하지 않고 비동기로 처리하여 응답성을 향상
#### async
- void / Task / Task<T>를 반환
- 메소드 내에서 await키워드를 사용할 수 있도록 만들어준다
#### await
- 비동기 작업의 흐름을 제어
- 해당 라인에서 비동기 작업이 완료될 때까지 대기, 완료되면 결과를 반환받고 다음 코드 실행

# .Net Core
    - 웹 앱, 모바일 앱, 데스크톱 프로그램, 게임 프로그램, 사물인터넷 프로그램 등을 만들기 위한 오픈소스 크로스 플랫폼 개발 환경

## .Net Core의 기본 구성

### Program
- .Net Core 6부터는 Main, Startup클래스가 없어지고 Program.cs라는 하나의 파일에 기본 구성 코드가 작성됨
- 앱에서 요구하는 서비스와 미들웨어를 통한 파이프라인이 구성됨

### 미들웨어
- HTTP요청에 대해 요청대리자가 존재하며, .NET Core 파이프라인의 수행을 차례대로 수행
- 대리자가 다음 대리자에 요청을 전달하지 않을 때, 이를 요청 파이프라인을 short-circuiting이라고 하며, 단락은 불필요한 작업을 방지한다. 다만, 클라이언트에 응답을 전송한 후 short-circuiting을 하면 안된다

- Use, Run, Map 세가지 메소드를 통해 등록
    1. Use: 미들웨어를 순서대로 등록하는 메소드
    2. Run: 모든 미들웨어 등록 후 마지막으로 호출하는 엔드포인트 메소드
    3. Map: 특정 URI에 대해서 분기를 나누는 메소드

- 미들웨어는 구성요소가 Configure 메소드에 추가되는 순서에 따라 호출 순서가 결정되며, HTTP요청 시에는 추가된 순선대로 호출되며, 응답 시에는 역순으로 호출된다.

#### 주요 미들웨어
1. UseExceptionHandler
    - 미들웨어에서 발생하는 예외를 잡는 기능을 하는 미들웨어
2. UseHttpsRedirection
    - 클라이언트에 Strict-Transport-Security헤더를 추가하여 HTTPS를 강제하게 만드는 미들웨어
3. UseRouting
    - HTTP요청을 일치시켜 앱의 실행 가능 앤드포인트로 디스패치하는 미들웨어
    - 요청된 URL에 따라 컨트롤러를 결정
4. UseAuthentication
   - 인증 미들웨어 활성화(클라이언트의 요청에 대해 사용자 인증을 처리, 인증된 사용자에게 접근 권한 부여)
   - 요청이 처리되기 전에 인증 정보를 확인하고, 사용자의 로그인 여부를 판단하도록 한다
5. UseAuthorization
   - 보안 리소스에 대해 권한 부여 활성화
   - 사용자의 권한에 따라 보안 리소스에 접근을 허용하거나 거부하는 작업 수행
6. UseEndPoints
   - 라우팅 및 앤드포인트 매핑을 설정하는 역할(요청이 어떤 엔드포인트에 매핑되는지 결정, 해당 엔드포인트에서 어떤 핸들러가 실행될지 지정)
   - 보통 메소드 내에 MapControllers()를 호출하여 컨트롤러의 엔드포인트를 매핑한다(직접 앤드포인트를 매핑할 수 있다)

### 라우팅
- 라우팅은 HTTP요청을 일치시켜 앱의 실행가능 앤드포인트로 디스패치하는 역할을 담당
- 클라이언트가 보낸 요청의 URL을 컨트롤러에 매핑, 컨트롤러에 [Route]특성을 사용하여 경로 지정

## 의존성 주입(Dependency Injection)
- 의존 관계의 볼륨이 클수록 유지보수가 힘든 것을 해결하기 위한 디자인 패턴
- 클래스 간의 강한 결합도를 줄이고 느슨한 결합을 이루도록 하는 것
- 코드의 품질과 유지보수성을 높일 수 있으며, 단위 테스트와 리팩토링을 하기 수월해진다

### 의존성 주입의 수명 주기
1. AddTransient
   - 서비스를 요청할 때마다 새로운 인스턴스를 생성
2. AddScope
   - 하나의 스코프에서 동일한 인스턴스를 생성, 다른 요청이 들어오면 새로운 인스턴스가 생성됨(하나의 HTTP요청에 대해)
3. AddSingleton
   - 애플리케이션 전체에서 하나의 인스턴스를 생성하고 공유
수명주기를 선택할 때는 thread-safe동작 여부, 성능(메모리)에 따라 선택한다
